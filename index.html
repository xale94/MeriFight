<html>

<head></head> 

<body>
    <div id="game"></div>
    <script type="text/javascript" src="node_modules/craftyjs/dist/crafty-min.js"></script>
    <script type="text/javascript" src="src/app/models/Scenary.js">
        
    </script>
    <script>
        let game = new Scenary({posX:0,posY:0,width:768,height:220,context:"", background:""})//Crafty.init(768, 256, document.getElementById('game'));
        game.start();
        Crafty.e('Floor, 2D, Canvas')
            .attr({
                x: 0,
                y: 220,
                w: 768, 
                h: 10
            });
        /*let limits = {
            xStart: 0,
            xEnd: 768,
            yStart: 0,
            yEnd: 220
        };
        let limitTop = Crafty.e('LimitTop, 2D, DOM, Collision').attr({
            x: 0,
            y: 0,
            w: 768,
            h: 1
        });
        let limitLeft = Crafty.e('limitLeft, 2D, DOM, Collision').attr({
            x: 0,
            y: 0,
            w: 1,
            h: 220
        });
        let limitRight = Crafty.e('limitRight, 2D, DOM, Collision').attr({
            x: 768,
            y: 0,
            w: 1,
            h: 220
        });*/
        Crafty.background('#FFFFFF url(src/assets/img/scenary.gif) no-repeat ');
        let square = Crafty.e('Player, 2D, DOM, Color, Twoway, Gravity, Collision')
            .attr({
                x: 100,
                y: 100,
                w: 50,
                h: 50
            })
            .color('#F00')
            .twoway(200, 240)
            .gravity('Floor')
            .collision()
            .bind('Moved', function (from) {
                console.log('move');
                if (this.hit("limitLeft")) {
                    console.log('hit');
                    this.attr({
                        x: 1,
                        y: this.y
                    });
                }
                if (this.hit("limitRight")) {
                    console.log(this.x);
                    this.attr({
                        x: 719,
                        y: this.y
                    });
                }
                if (this.hit("LimitTop")) {
                    this.attr({
                        x: this.x,
                        y: -1
                    });
                }
            });

        //.
        //.mbr([0, 0, 768, 0, 768, 220, 0, 220])
        /*

        function stopMovement() {
            this._speed = 0;
            if (this._movement) {
                this.x -= this._movement.x;
                this.y -= this._movement.y;
            }
        }*/
        //Crafty.audio.add("sound", "src/assets/sounds/soundtrack/sound.mp3"); 
        //Crafty.audio.play("sound", -1, 1);
    </script>
    <!--<script src="src/app/controllers/controller.js"></script>-->
</body>

</html>