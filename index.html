<html>

<head></head>

<body>
    <div id="game"></div>
    <script type="text/javascript" src="node_modules/craftyjs/dist/crafty-min.js"></script>
    <script type="text/javascript" src="src/app/models/Scenary.js">
    </script>
    <script type="text/javascript" src="src/app/models/Component.js">
    </script>
    <script type="text/javascript" src="src/app/models/HealBar.js">
    </script>
    <script type="text/javascript" src="src/app/models/Character.js">
    </script>
    <script type="text/javascript" src="src/app/models/Player.js">
    </script>
    <script>
        let game = new Scenary({
            posX: 0,
            posY: 0,
            width: 768,
            height: 220,
            context: "",
            background: "#FFFFFF url(src/assets/img/scenary.gif) no-repeat "
        }) //Crafty.init(768, 256, document.getElementById('game'));
        game.start();
        Crafty.e('Floor, 2D, Canvas')
            .attr({
                x: 0,
                y: 210,
                w: 768,
                h: 10
            });
        let assetsObj = {
            sprites: {
                "src/assets/img/BalotelliRunning.png": {
                    tile: 44,
                    tileh: 44,
                    map: {
                        "balotelliRun": [0, 0]
                    }
                }
            }
        };
        /*
                let square = Crafty.e('Player, 2D, DOM, Color, Twoway, Gravity, Collision')
                    .attr({
                        x: 100,
                        y: 100,
                        w: 50,
                        h: 50
                    })
                    .color('#F00')
                    .twoway(200, 240)
                    .gravity('Floor')
                    .collision()
                    .bind('Moved', function (from) {
                        console.log(Crafty.timer.FPS());
                        Maxheal.x = this.x - this.w / 2;
                        Maxheal.y = this.y - this.h + 30;
                        Heal.x = Maxheal.x + 2;
                        Heal.y = Maxheal.y + 2;
                        Damage.x = Heal.x;
                        Damage.y = Heal.y;
                        if (this.hit("limitLeft")) {
                            console.log('hit');
                            this.attr({
                                x: 1,
                                y: this.y
                            });

                            if ((Heal.w - 5) <= 0) {
                                Heal.color('rgba (0,0,0,0)');
                            }
                            Heal.w = Heal.w - 5;
                        }
                        if (this.hit("limitRight")) {
                            console.log(this.color);
                            this.attr({
                                x: 719,
                                y: this.y
                            });
                        }
                        if (this.hit("LimitTop")) {
                            this.attr({
                                x: this.x,
                                y: -1
                            });
                        }
                    });
        */

        Crafty.load(assetsObj)
        let ch = new Player({
            reference: 'Player',
            posX: 100,
            posY: 100,
            width: 44,
            height: 44,
            color: '#F00',
        });

/*

let square = Crafty.e('Enemy, 2D, DOM, Color, Gravity, Collision')
                    .attr({
                        x: 100,
                        y: 100,
                        w: 50,
                        h: 50
                    })
                    .color('#F00')
                    .gravity('Floor')
                    .collision()
                    .bind('Moved', function (from) {
                        console.log(Crafty.timer.FPS());
                        Maxheal.x = this.x - this.w / 2;
                        Maxheal.y = this.y - this.h + 30;
                        Heal.x = Maxheal.x + 2;
                        Heal.y = Maxheal.y + 2;
                        Damage.x = Heal.x;
                        Damage.y = Heal.y;
                        if (this.hit("limitLeft")) {
                            console.log('hit');
                            this.attr({
                                x: 1,
                                y: this.y
                            });

                            if ((Heal.w - 5) <= 0) {
                                Heal.color('rgba (0,0,0,0)');
                            }
                            Heal.w = Heal.w - 5;
                        }
                        if (this.hit("limitRight")) {
                            console.log(this.color);
                            this.attr({
                                x: 719,
                                y: this.y
                            });
                        }
                        if (this.hit("LimitTop")) {
                            this.attr({
                                x: this.x,
                                y: -1
                            });
                        }
                    });

*/



        //Crafty.audio.add("sound", "src/assets/sounds/soundtrack/sound.mp3"); 
        //Crafty.audio.play("sound", -1, 1);
    </script>
    <!--<script src="src/app/controllers/controller.js"></script>-->
</body>

</html>